"use strict";(self.webpackChunkDashboard_valuecleainig=self.webpackChunkDashboard_valuecleainig||[]).push([[602],{3602:(K,Z,a)=>{a.r(Z),a.d(Z,{InvestmentsModule:()=>g});var m=a(6895),h=a(9299),s=a(4006),_=a(5938),t=a(4650),A=a(529);class c{constructor(n){this.http=n}getData(n){let e=new A.LE;return n.search&&(e=e.append("search",n.search)),this.http.get("https://gulf.carpulla.com/public/api/v1/dashboard/investments",{params:e})}getDataLaction(){return this.http.get("https://gulf.carpulla.com/public/api/v1/dashboard/locations")}createSilder(n){return this.http.post("https://gulf.carpulla.com/public/api/v1/dashboard/investments",n)}delete(n){return this.http.delete("https://gulf.carpulla.com/public/api/v1/dashboard/investments/"+n)}update(n,e){return this.http.post("https://gulf.carpulla.com/public/api/v1/dashboard/investments/"+e,n)}}c.\u0275fac=function(n){return new(n||c)(t.LFG(A.eN))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"});var x=a(7185),T=a(8423),v=a(9549),I=a(4859),C=a(4385),q=a(3238),U=a(4144);function y(o,n){1&o&&(t.TgZ(0,"div",28),t._UZ(1,"img",29),t.qZA())}function S(o,n){1&o&&(t.TgZ(0,"h1",30),t._uU(1,"Add New Data"),t.qZA())}function D(o,n){1&o&&(t.TgZ(0,"h1",30),t._uU(1,"Update Data"),t.qZA())}function N(o,n){1&o&&(t.ynx(0),t._uU(1,"The ar.description field is required."),t.BQk())}function w(o,n){1&o&&(t.ynx(0),t._uU(1,"The ar.description must be at least 3 characters long."),t.BQk())}function J(o,n){if(1&o&&(t.TgZ(0,"mat-error",31),t.YNc(1,N,2,0,"ng-container",32),t.YNc(2,w,2,0,"ng-container",32),t.qZA()),2&o){const e=t.oxw();let i,r;t.xp6(1),t.Q6J("ngIf",null==(i=e.formSilder.get("ar.description"))||null==i.errors?null:i.errors.required),t.xp6(1),t.Q6J("ngIf",null==(r=e.formSilder.get("ar.description"))||null==r.errors?null:r.errors.minlength)}}function k(o,n){1&o&&(t.ynx(0),t._uU(1,"The en.description field is required."),t.BQk())}function O(o,n){1&o&&(t.ynx(0),t._uU(1,"The en.description must be at least 3 characters long."),t.BQk())}function Y(o,n){if(1&o&&(t.TgZ(0,"mat-error",31),t.YNc(1,k,2,0,"ng-container",32),t.YNc(2,O,2,0,"ng-container",32),t.qZA()),2&o){const e=t.oxw();let i,r;t.xp6(1),t.Q6J("ngIf",null==(i=e.formSilder.get("en.description"))||null==i.errors?null:i.errors.required),t.xp6(1),t.Q6J("ngIf",null==(r=e.formSilder.get("en.description"))||null==r.errors?null:r.errors.minlength)}}function Q(o,n){1&o&&(t.ynx(0),t._uU(1,"The price field is required."),t.BQk())}function F(o,n){1&o&&(t.ynx(0),t._uU(1,"The price must be at least 3 characters long."),t.BQk())}function M(o,n){if(1&o&&(t.TgZ(0,"mat-error",31),t.YNc(1,Q,2,0,"ng-container",32),t.YNc(2,F,2,0,"ng-container",32),t.qZA()),2&o){const e=t.oxw();let i,r;t.xp6(1),t.Q6J("ngIf",null==(i=e.formSilder.get("price"))||null==i.errors?null:i.errors.required),t.xp6(1),t.Q6J("ngIf",null==(r=e.formSilder.get("price"))||null==r.errors?null:r.errors.minlength)}}function L(o,n){if(1&o&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",null==e?null:e.id),t.xp6(1),t.hij(" ",null==e.translations[1]?null:e.translations[1].name," ")}}function B(o,n){1&o&&(t.ynx(0),t._uU(1,"The location field is required."),t.BQk())}function P(o,n){if(1&o&&(t.TgZ(0,"mat-error",31),t.YNc(1,B,2,0,"ng-container",32),t.qZA()),2&o){const e=t.oxw();let i;t.xp6(1),t.Q6J("ngIf",null==(i=e.formSilder.get("location_id"))||null==i.errors?null:i.errors.required)}}function G(o,n){1&o&&(t.TgZ(0,"button",34),t._uU(1,"Create"),t.qZA())}function W(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.updateWorker())}),t._uU(1,"Update"),t.qZA()}}class u{constructor(n,e,i,r,l,d){this.data=n,this.fb=e,this.serv=i,this.toaster=r,this.sppiner=l,this.dialog=d,this.locatiodate=[],this.show=!1,this.url="",this.photo={photoImages:[]},this.img=!1}ngOnInit(){this.createForm(),this.getData()}createForm(){this.formSilder=this.fb.group({ar:this.fb.group({description:[this.data?.translations[0]?.description||"",[s.kI.required,s.kI.minLength(3)]]}),en:this.fb.group({description:[this.data?.translations[1]?.description||"",[s.kI.required,s.kI.minLength(3)]]}),image:[this.data?.image_path||"",[s.kI.required]],price:[this.data?.price||"",[s.kI.required]],location_id:["",[s.kI.required]]})}selectPhoto(n){const e=n.target.files[0];if(e){this.photoName=e.name,this.formSilder.get("image")?.setValue(e);const i=new FileReader;i.onload=r=>{this.url=r.target?.result},i.readAsDataURL(e)}}createSilder(){if(this.formSilder.valid){const n=this.createFormData();this.img=!0,this.serv.createSilder(n).subscribe(e=>{this.img=!1,this.dialog.close(!0),this.toaster.success("created successfully","",{closeButton:!0,progressBar:!0,timeOut:3e3});let i=new Audio("../../../assets/notification-sound/login.wav");i.load(),i.play()},e=>{this.img=!1})}else this.formSilder.markAllAsTouched()}createFormData(){const n=new FormData;return n.append("ar[description]",this.formSilder.get("ar.description")?.value),n.append("en[description]",this.formSilder.get("en.description")?.value),n.append("price",this.formSilder.get("price")?.value),n.append("location_id",this.formSilder.get("location_id")?.value),n.append("image",this.formSilder.get("image")?.value),n}updateWorker(){if(this.formSilder.valid){const n=this.createFormData();this.img=!0,this.serv.update(n,this.data.id).subscribe(e=>{this.img=!1,this.dialog.close(!0),this.toaster.success("updated successfully","",{closeButton:!0,progressBar:!0,timeOut:3e3});let i=new Audio("../../../assets/notification-sound/login.wav");i.load(),i.play()},e=>{this.img=!1})}else this.formSilder.markAllAsTouched()}close(){this.dialog.close()}getData(){this.serv.getDataLaction().subscribe(n=>{this.locatiodate=n.Locations.data})}}u.\u0275fac=function(n){return new(n||u)(t.Y36(_.WI),t.Y36(s.qu),t.Y36(c),t.Y36(x._W),t.Y36(T.t2),t.Y36(_.so))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-add-investments"]],decls:51,vars:13,consts:[[1,"wrapper"],["id","pre-loader",4,"ngIf"],[1,"p-4"],[1,"d-flex","justify-content-between","align-items-center"],["class","m-0",4,"ngIf"],[1,"animate__animated","animate__fadeInDown",2,"margin-top","46px",3,"formGroup","ngSubmit"],[1,"row","mt-3"],["formGroupName","ar",1,"col-md-12"],[1,"col-md-12"],["appearance","outline",1,"w-100"],["for","arDescription"],["matInput","","id","arDescription","formControlName","description","placeholder","Description Arabic"],["class","error",4,"ngIf"],["formGroupName","en",1,"col-md-12"],["for","enDescription"],["matInput","","id","enDescription","formControlName","description","placeholder","Description En"],["matInput","","id","enDescription","formControlName","price","placeholder","Add Price"],["formControlName","location_id"],[3,"value",4,"ngFor","ngForOf"],["for","selected","type","button",1,"button","gray","small"],["role","alert"],["alt","",1,"myu",3,"src"],["type","file","id","selected","hidden","",3,"change"],[1,"tw-p-6"],[1,"d-flex","justify-content-center","align-items-center"],["mat-flat-button","","class","btn btn-success py-1 px-5 mx-2","type","submit",4,"ngIf"],["mat-flat-button","","class","btn btn-success py-1 px-5 mx-2","type","button",3,"click",4,"ngIf"],["mat-flat-button","","type","button",1,"btn","btn-danger","py-1","px-5",3,"click"],["id","pre-loader"],["src","assets/loader-01.svg","alt",""],[1,"m-0"],[1,"error"],[4,"ngIf"],[3,"value"],["mat-flat-button","","type","submit",1,"btn","btn-success","py-1","px-5","mx-2"],["mat-flat-button","","type","button",1,"btn","btn-success","py-1","px-5","mx-2",3,"click"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0),t.YNc(1,y,2,0,"div",1),t.qZA(),t.TgZ(2,"div",2)(3,"header",3),t.YNc(4,S,2,0,"h1",4),t.YNc(5,D,2,0,"h1",4),t.qZA(),t._UZ(6,"hr"),t.TgZ(7,"form",5),t.NdJ("ngSubmit",function(){return e.createSilder()}),t.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"mat-form-field",9)(12,"mat-label",10),t._uU(13,"Arabic Description"),t.qZA(),t._UZ(14,"input",11),t.YNc(15,J,3,2,"mat-error",12),t.qZA()()(),t.TgZ(16,"div",13)(17,"div",8)(18,"mat-form-field",9)(19,"mat-label",14),t._uU(20,"English Description"),t.qZA(),t._UZ(21,"input",15),t.YNc(22,Y,3,2,"mat-error",12),t.qZA()()(),t.TgZ(23,"div",8)(24,"mat-form-field",9)(25,"mat-label",14),t._uU(26,"Price"),t.qZA(),t._UZ(27,"input",16),t.YNc(28,M,3,2,"mat-error",12),t.qZA()(),t.TgZ(29,"div",8)(30,"mat-form-field",8)(31,"mat-label"),t._uU(32,"Choose Location"),t.qZA(),t.TgZ(33,"mat-select",17),t.YNc(34,L,2,2,"mat-option",18),t.qZA(),t.YNc(35,P,2,1,"mat-error",12),t.qZA()(),t.TgZ(36,"div",8)(37,"label",19),t._uU(38,"Select Photo"),t.qZA(),t.TgZ(39,"div",20)(40,"div")(41,"p"),t._uU(42),t.qZA()(),t._UZ(43,"img",21),t.qZA(),t.TgZ(44,"input",22),t.NdJ("change",function(r){return e.selectPhoto(r)}),t.qZA()()(),t.TgZ(45,"footer",23)(46,"div",24),t.YNc(47,G,2,0,"button",25),t.YNc(48,W,2,0,"button",26),t.TgZ(49,"button",27),t.NdJ("click",function(){return e.close()}),t._uU(50,"Close"),t.qZA()()()()()),2&n){let i,r,l,d;t.xp6(1),t.Q6J("ngIf",e.img),t.xp6(3),t.Q6J("ngIf",!e.data),t.xp6(1),t.Q6J("ngIf",e.data),t.xp6(2),t.Q6J("formGroup",e.formSilder),t.xp6(8),t.Q6J("ngIf",(null==(i=e.formSilder.get("ar.description"))?null:i.invalid)&&(null==(i=e.formSilder.get("ar.description"))?null:i.touched)),t.xp6(7),t.Q6J("ngIf",(null==(r=e.formSilder.get("en.description"))?null:r.invalid)&&(null==(r=e.formSilder.get("en.description"))?null:r.touched)),t.xp6(6),t.Q6J("ngIf",(null==(l=e.formSilder.get("price"))?null:l.invalid)&&(null==(l=e.formSilder.get("price"))?null:l.touched)),t.xp6(6),t.Q6J("ngForOf",e.locatiodate),t.xp6(1),t.Q6J("ngIf",(null==(d=e.formSilder.get("location_id"))?null:d.invalid)&&(null==(d=e.formSilder.get("location_id"))?null:d.touched)),t.xp6(7),t.Oqu(e.url?e.photoName:e.formSilder.value.image),t.xp6(1),t.Q6J("src",e.url?e.url:e.formSilder.value.image,t.LSH),t.xp6(4),t.Q6J("ngIf",!e.data),t.xp6(1),t.Q6J("ngIf",e.data)}},dependencies:[m.sg,m.O5,v.TO,v.KE,v.hX,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,s.x0,I.lW,C.gD,q.ey,U.Nt],styles:["h1[_ngcontent-%COMP%]{font-weight:700}textarea[_ngcontent-%COMP%]{min-width:100%;max-width:100%;min-height:auto;max-height:auto}.btn-success[_ngcontent-%COMP%]{color:#fff;background-color:#218838;border-color:#1e7e34}.btn-success[_ngcontent-%COMP%]:hover{color:#fff;background-color:#218838;border-color:#1e7e34;box-shadow:0 0 #0003,0 0 #00000024,0 0 #0000001f}.btn-danger[_ngcontent-%COMP%]{color:#fff;background-color:#c82333;border-color:#bd2130}footer[_ngcontent-%COMP%]{background:none!important;box-shadow:none!important}.myu[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:4px;padding:0;width:150px}.myu[_ngcontent-%COMP%]:hover{box-shadow:0 0 2px 1px #008cba80}.error[_ngcontent-%COMP%]{font-size:12px!important}"]});var b=a(4333),E=a(3081);function R(o,n){1&o&&(t.TgZ(0,"div",27),t._UZ(1,"img",28),t.qZA())}function j(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"img",29),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"date"),t.qZA(),t.TgZ(17,"td")(18,"a",30),t.NdJ("click",function(){const l=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.openFormEdit(l))}),t._UZ(19,"i",31),t.qZA()(),t.TgZ(20,"td")(21,"a",32),t.NdJ("click",function(){const l=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.opendelet(l.id))}),t._UZ(22,"i",33),t.qZA(),t.TgZ(23,"div",34)(24,"div",35)(25,"div",36)(26,"div",37)(27,"h2",38),t._uU(28,"Warning"),t.qZA(),t.TgZ(29,"button",39)(30,"span",40),t._uU(31,"\xd7"),t.qZA()()(),t.TgZ(32,"div",41)(33,"div",42),t._uU(34," Are you sure you want to delete the item? "),t.qZA()(),t.TgZ(35,"div",43)(36,"button",44),t._uU(37,"Close"),t.qZA(),t.TgZ(38,"button",45),t.NdJ("click",function(){const l=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.delete(l.id))}),t._uU(39,"Delete"),t.qZA()()()()()()()}if(2&o){const e=n.$implicit,i=n.index;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(null==e.translations[0]?null:e.translations[0].description),t.xp6(2),t.Oqu(null==e.translations[1]?null:e.translations[1].description),t.xp6(2),t.Oqu(null==e?null:e.price),t.xp6(2),t.Q6J("src",e.image_path,t.LSH),t.xp6(2),t.Oqu(t.lcZ(13,7,e.created_at)),t.xp6(3),t.Oqu(t.lcZ(16,9,e.updated_at))}}const z=function(o,n){return{id:"item",itemsPerPage:10,currentPage:o,totalItems:n}};class f{constructor(n,e,i,r,l){this.serv=n,this.dialog=e,this.fb=i,this.toster=r,this.rotue=l,this.sildershow=[],this.img=!1,this.page=1,this.filter={page:this.page,limit:10}}ngOnInit(){this.getAllData()}getAllData(){this.img=!0,this.serv.getData(this.filter).subscribe(n=>{this.sildershow=n.Investments.data,this.total=n.Investments.total,console.log(this.total),this.img=!1})}openForm(){this.dialog.open(u,{width:"750px",height:"600px",disableClose:!0}).afterClosed().subscribe(e=>{1==e&&this.getAllData()})}openFormEdit(n){this.dialog.open(u,{width:"750px",height:"600px",disableClose:!0,data:n}).afterClosed().subscribe(i=>{1==i&&this.getAllData()})}opendelet(n){this.id=n}delete(n){this.img=!0,this.serv.delete(this.id).subscribe(e=>{this.toster.success(e.message,"",{disableTimeOut:!1,titleClass:"toastr_title",messageClass:"toastr_message",timeOut:3e3,onActivateTick:!1,toastClass:"ngx-toastr",progressBar:!0,easing:"ease-in",enableHtml:!0,newestOnTop:!0,tapToDismiss:!0,positionClass:"toast-top-right",closeButton:!0}),this.img=!1;let i=new Audio;i.src="../../../assets/notification-sound/login.wav",i.load(),i.play(),this.getAllData()},e=>{this.img=!1})}search(n){this.filter.search=n.value,clearTimeout(this.timeOutId),this.timeOutId=setTimeout(()=>{this.getAllData()},1500)}nav(n){this.page=n,this.getAllData()}}f.\u0275fac=function(n){return new(n||f)(t.Y36(c),t.Y36(_.uw),t.Y36(s.qu),t.Y36(x._W),t.Y36(h.F0))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-investments"]],decls:53,vars:14,consts:[[1,"wrapper"],["id","pre-loader",4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"content-wrapper"],[1,"page-title"],[1,"col-sm-6"],[1,"mb-0",2,"font-size","1.571rem","font-weight","800"],[1,"col-xl-12","mb-30"],[1,"card","card-statistics","h-100"],[1,"card-body"],[1,"d-block","d-md-flex","justify-content-between"],[1,"d-block"],[1,"card-title","pb-0","border-0"],[1,"d-block","d-md-flex","clearfix","sm-mt-20"],[1,"button","button-border","icon","small",2,"margin-right","13px","border-radius","38px",3,"click"],[1,"fa","fa-long-arrow-right"],[1,"widget-search","ml-0","clearfix"],[1,"fa","fa-search"],["type","search",1,"form-control",3,"placeholder","keyup"],[1,"table-responsive","mt-15"],[1,"table","center-aligned-table","mb-0"],[2,"border-top","1px solid #dee2e6"],[2,"text-align","center"],[4,"ngFor","ngForOf"],[1,"container"],["id","item",3,"pageChange"],["id","pre-loader"],["src","assets/loader-01.svg","alt",""],["alt","",2,"width","90px","height","64px","border-radius","14px",3,"src"],[1,"pr-2",3,"click"],[1,"fa","fa-pencil"],["data-toggle","modal","data-target","#exampleModal",1,"my","btn","btn-outline-danger","btn-sm",3,"click"],[1,"fa","fa-trash-o","text-danger"],["id","exampleModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title",2,"border-bottom","2px outset red"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["role","alert",1,"alert","alert-danger",2,"font-size","17px","text-align","center"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary"],["type","button","data-dismiss","modal",1,"btn","btn-danger",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,R,2,0,"div",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",3)(7,"div",6)(8,"h2",7),t._uU(9," Investments"),t.qZA()(),t._UZ(10,"div",6),t.qZA()(),t.TgZ(11,"div",3)(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"h5",13),t._uU(18,"Data Investments"),t.qZA()(),t.TgZ(19,"div",14)(20,"a",15),t.NdJ("click",function(){return e.openForm()}),t._uU(21," Add Data"),t._UZ(22,"i",16),t.qZA(),t.TgZ(23,"div",17),t._UZ(24,"i",18),t.TgZ(25,"input",19),t.NdJ("keyup",function(r){return e.search(r.target)}),t.ALo(26,"translate"),t.qZA()()()(),t.TgZ(27,"div",20)(28,"table",21)(29,"thead")(30,"tr",22)(31,"th"),t._uU(32,"ID"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"Description Ar"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"Description En"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"Price"),t.qZA(),t.TgZ(39,"th"),t._uU(40,"Image"),t.qZA(),t.TgZ(41,"th"),t._uU(42,"Created At"),t.qZA(),t.TgZ(43,"th"),t._uU(44,"Updated At"),t.qZA(),t.TgZ(45,"th",23),t._uU(46),t.ALo(47,"translate"),t.qZA()()(),t.TgZ(48,"tbody"),t.YNc(49,j,40,11,"tr",24),t.ALo(50,"paginate"),t.qZA()(),t.TgZ(51,"div",25)(52,"pagination-controls",26),t.NdJ("pageChange",function(r){return e.nav(r)}),t.qZA()()()()()()()()()()()),2&n&&(t.xp6(1),t.Q6J("ngIf",e.img),t.xp6(24),t.MGl("placeholder","",t.lcZ(26,4,"AllWorkers.Search"),"...."),t.xp6(21),t.Oqu(t.lcZ(47,6,"AllWorkers.Action")),t.xp6(3),t.Q6J("ngForOf",t.xi3(50,8,e.sildershow,t.WLB(11,z,e.page,e.total))))},dependencies:[m.sg,m.O5,b.LS,m.uU,E.X$,b._s]});const H=[{path:"",component:f}];class p{}p.\u0275fac=function(n){return new(n||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[h.Bz.forChild(H),h.Bz]});var $=a(7775);class g{}g.\u0275fac=function(n){return new(n||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[m.ez,p,$.m,b.JX]})}}]);